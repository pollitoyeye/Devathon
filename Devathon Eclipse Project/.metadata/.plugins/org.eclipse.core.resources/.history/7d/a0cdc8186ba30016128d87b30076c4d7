package es.pollitoyeye.vendingmachines.utils;

import org.bukkit.Location;
import org.bukkit.configuration.file.FileConfiguration;
import org.bukkit.configuration.file.YamlConfiguration;
import org.bukkit.entity.ArmorStand;
import org.bukkit.entity.EntityType;
import org.bukkit.inventory.ItemStack;

import es.pollitoyeye.vendingmachines.VendingMachines;

public class StructureManager {
	public static void loadMachine(Location loc){
		@SuppressWarnings("deprecation")
		FileConfiguration config = YamlConfiguration.loadConfiguration(VendingMachines.getPlugin().getResource("Machine.schem"));
		int currentPos = 0;
		while(config.contains("" + currentPos)){
			Location spawnLoc = loc.clone().add(config.getDouble(currentPos + ".position.x"), config.getDouble(currentPos + ".position.y"), config.getDouble(currentPos + ".position.z"));
			spawnLoc.setYaw(Float.parseFloat(config.get(currentPos + ".yaw").toString()));
			spawnLoc.setPitch(Float.parseFloat(config.get(currentPos + ".pitch").toString()));
			ArmorStand a = (ArmorStand) loc.getWorld().spawnEntity(spawnLoc, EntityType.ARMOR_STAND);
			ItemStack helmet = config.getItemStack(currentPos + ".helmet");
			currentPos++;
		}
	}
}
